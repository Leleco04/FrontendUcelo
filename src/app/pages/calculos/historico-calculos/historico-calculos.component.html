<div class="container-historico">

  <!-- TITULO DA TABELA-->
  <h2 class="text-center font-bold mb-10 mt-2" style="font-size: 1.5rem">
    Histórico de Cálculos
  </h2>

  <mat-tab-group
    (selectedTabChange)="tabAlterada($event)"
    animationDuration="0ms"
  >





    <!-- HISTORICO DE CAPACIDADE -->
    <mat-tab label="Cálculos de Capacidade">
      <div *ngIf="loadingCapacidade" class="loading-spinner">
        <mat-spinner></mat-spinner>
      </div>
      <div
        class="tabela-container mat-elevation-z8"
        [hidden]="loadingCapacidade"
      >
        <table mat-table [dataSource]="dataSourceCapacidade">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let item">{{ item.id }}</td>
          </ng-container>

          <ng-container matColumnDef="velocidade">
            <th mat-header-cell *matHeaderCellDef>Velocidade</th>
            <td mat-cell *matCellDef="let item">
              {{ item.velocidade | number : "1.2-2" }} m/s
            </td>
          </ng-container>

          <ng-container matColumnDef="passo">
            <th mat-header-cell *matHeaderCellDef>Passo</th>
            <td mat-cell *matCellDef="let item">{{ item.passo }} mm</td>
          </ng-container>

          <ng-container matColumnDef="numFileirasCorreia">
            <th mat-header-cell *matHeaderCellDef>N° Fileiras</th>
            <td mat-cell *matCellDef="let item">
              {{ item.numFileirasCorreia }}
            </td>
          </ng-container>

          <ng-container matColumnDef="densidadeProduto">
            <th mat-header-cell *matHeaderCellDef>Densidade</th>
            <td mat-cell *matCellDef="let item">
              {{ item.densidadeProduto }} kg/m³
            </td>
          </ng-container>

          <ng-container matColumnDef="volumeCaneca">
            <th mat-header-cell *matHeaderCellDef>Vol. Caneca</th>
            <td mat-cell *matCellDef="let item">{{ item.volumeCaneca }} l</td>
          </ng-container>

          <ng-container matColumnDef="fatorEnchimento">
            <th mat-header-cell *matHeaderCellDef>Enchimento</th>
            <td mat-cell *matCellDef="let item">
              {{ item.fatorEnchimento | number : "1.0-0" }}%
            </td>
          </ng-container>

          <ng-container matColumnDef="dimensoes">
            <th mat-header-cell *matHeaderCellDef>Dimensões (LxPxPr)</th>
            <td mat-cell *matCellDef="let item">
              {{ item.largura }} x {{ item.profundidade }} x
              {{ item.projecao }} mm
            </td>
          </ng-container>

          <ng-container matColumnDef="capacidadeCalculada">
            <th mat-header-cell *matHeaderCellDef style="font-weight: bold;">Resultado</th>
            <td mat-cell *matCellDef="let item" class="coluna-resultado">
              {{ item.capacidadeCalculada | number : "1.2-2" }} t/h
            </td>
          </ng-container>

          <ng-container matColumnDef="acoes">
            <th mat-header-cell *matHeaderCellDef style="text-align: center">
              Relatório
            </th>
            <td mat-cell *matCellDef="let item" style="text-align: center">
              <mat-spinner
                *ngIf="idsBaixando.has(item.id)"
                [diameter]="24"
              ></mat-spinner>
              <button
                *ngIf="!idsBaixando.has(item.id)"
                mat-icon-button
                color="primary"
                (click)="baixarRelatorioCapacidade(item)"
                matTooltip="Baixar Relatório (PDF)"
                class="btn-baixar-pdf"
              >
                <mat-icon>picture_as_pdf</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="columnsCapacidade; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: columnsCapacidade"></tr>
        </table>

        <mat-paginator
          #paginatorCapacidade
          [length]="totalCapacidade"
          [pageSize]="pageSizeCapacidade"
          [pageSizeOptions]="[5, 10, 20]"
          (page)="mudarPaginaCapacidade($event)"
          showFirstLastButtons
        >
        </mat-paginator>
      </div>
    </mat-tab>





    <!-- HISTORICO DE VELOCIDADE -->
    <mat-tab label="Cálculos de Velocidade">
      <div *ngIf="loadingVelocidade" class="loading-spinner">
        <mat-spinner></mat-spinner>
      </div>
      <div class="tabela-container" [hidden]="loadingVelocidade">
        <table mat-table [dataSource]="dataSourceVelocidade">
          <ng-container matColumnDef="acoes" class="justify-center">
            <th mat-header-cell *matHeaderCellDef style="text-align: center">
              Relatório
            </th>
            <td mat-cell *matCellDef="let item" style="text-align: center">
              <mat-spinner
                *ngIf="idsBaixando.has(item.id)"
                [diameter]="24"
              ></mat-spinner>
              <button
                *ngIf="!idsBaixando.has(item.id)"
                mat-icon-button
                color="primary"
                (click)="baixarRelatorioVelocidade(item)"
                matTooltip="Baixar Relatório (PDF)"
                class="btn-baixar-pdf"
              >
                <mat-icon>picture_as_pdf</mat-icon>
              </button>
            </td>
          </ng-container>

          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let item">{{ item.id }}</td>
          </ng-container>

          <ng-container matColumnDef="diametroTambor">
            <th mat-header-cell *matHeaderCellDef>Diâmetro Tambor</th>
            <td mat-cell *matCellDef="let item">
              {{ item.diametroTambor }} mm
            </td>
          </ng-container>

          <ng-container matColumnDef="rotacaoDoTambor">
            <th mat-header-cell *matHeaderCellDef>Rotação</th>
            <td mat-cell *matCellDef="let item">
              {{ item.rotacaoDoTambor }} rpm
            </td>
          </ng-container>

          <ng-container matColumnDef="velocidadeCalculada">
            <th mat-header-cell *matHeaderCellDef style="font-weight: bold;">Resultado</th>
            <td mat-cell *matCellDef="let item" class="coluna-resultado">
              {{ item.velocidadeCalculada | number : "1.2-2" }} m/s
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="columnsVelocidade; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: columnsVelocidade"></tr>
        </table>

        <mat-paginator
          #paginatorVelocidade
          [length]="totalVelocidade"
          [pageSize]="pageSizeVelocidade"
          [pageSizeOptions]="[5, 10, 20]"
          (page)="mudarPaginaVelocidade($event)"
          showFirstLastButtons
        >
        </mat-paginator>
      </div>
    </mat-tab>






  </mat-tab-group>
</div>
